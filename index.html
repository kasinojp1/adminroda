<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Roda Hadiah — Natal KASINOJP</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {font-family:'Poppins', sans-serif; background:linear-gradient(180deg,#071229,#0c1624); color:#fff; padding:20px;}
h1 {background:linear-gradient(90deg,#ffef9f,#d4af37); -webkit-background-clip:text; color:transparent; font-size:28px; text-align:center; margin-bottom:30px;}
section {margin-bottom:30px;}
input, button {padding:10px 14px; border-radius:8px; border:none; font-weight:600;}
button {cursor:pointer; background:#ffef9f; color:#111; transition:0.3s;}
button:hover{background:#ffd966;}
input[type="text"]{flex:1; margin-right:10px;}
.row {display:flex; align-items:center; margin-bottom:10px;}
.list {margin-top:10px; border:1px solid #ffd966; border-radius:10px; padding:10px; max-height:200px; overflow-y:auto;}
.list div {padding:6px 10px; border-bottom:1px solid #ffd966;}
.list div:last-child{border-bottom:none;}
</style>
</head>
<body>

<h1>Admin Roda Hadiah — Natal KASINOJP</h1>

<section>
  <h2>Tambahkan Voucher</h2>
  <div class="row">
    <input type="text" id="voucherInput" placeholder="Kode voucher baru...">
    <button id="addVoucherBtn">Tambah Voucher</button>
  </div>
  <div class="list" id="voucherList"></div>
</section>

<section>
  <h2>Atur Hadiah Roda</h2>
  <div class="row">
    <input type="text" id="prizeInput" placeholder="Nama hadiah baru...">
    <button id="addPrizeBtn">Tambah Hadiah</button>
  </div>
  <div class="list" id="prizeList"></div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, get, set, push, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDlpuf_uIlpmr2ybAqpJ2GTTRW-t86PGf0",
  authDomain: "hadiahnatal-a033b.firebaseapp.com",
  databaseURL: "https://hadiahnatal-a033b-default-rtdb.firebaseio.com",
  projectId: "hadiahnatal-a033b",
  storageBucket: "hadiahnatal-a033b.firebasestorage.app",
  messagingSenderId: "577153304596",
  appId: "1:577153304596:web:5f255e886a379ccb12bf01",
  measurementId: "G-C5Q83YQ6SK"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const voucherInput = document.getElementById('voucherInput');
const addVoucherBtn = document.getElementById('addVoucherBtn');
const voucherListEl = document.getElementById('voucherList');

const prizeInput = document.getElementById('prizeInput');
const addPrizeBtn = document.getElementById('addPrizeBtn');
const prizeListEl = document.getElementById('prizeList');

const vouchersRef = ref(db, 'gameConfig/vouchers');
const prizesRef = ref(db, 'gameConfig/prizes');

// Tambah voucher
addVoucherBtn.addEventListener('click', async () => {
  const code = voucherInput.value.trim();
  if(!code) return alert('Masukkan kode voucher!');
  const snap = await get(ref(db,'gameConfig/vouchers/'+code));
  if(snap.exists()){ alert('Voucher sudah ada'); return; }
  await set(ref(db,'gameConfig/vouchers/'+code), true);
  voucherInput.value='';
  alert('Voucher berhasil ditambahkan');
});

// Tambah hadiah
addPrizeBtn.addEventListener('click', async () => {
  const prize = prizeInput.value.trim();
  if(!prize) return alert('Masukkan nama hadiah!');
  const newRef = push(prizesRef);
  await set(newRef, prize);
  prizeInput.value='';
  alert('Hadiah berhasil ditambahkan');
});

// Tampilkan daftar voucher
onValue(vouchersRef, snap => {
  voucherListEl.innerHTML='';
  if(snap.exists()){
    Object.keys(snap.val()).forEach(code=>{
      const div = document.createElement('div');
      div.textContent = code;
      voucherListEl.appendChild(div);
    });
  }
});

// Tampilkan daftar hadiah
onValue(prizesRef, snap => {
  prizeListEl.innerHTML='';
  if(snap.exists()){
    Object.values(snap.val()).forEach(prize=>{
      const div = document.createElement('div');
      div.textContent = prize;
      prizeListEl.appendChild(div);
    });
  }
});
</script>

</body>
</html>
